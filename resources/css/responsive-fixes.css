/**
 * Responsive Fixes & Enhancements
 * Comprehensive responsive design improvements for all devices
 */

/* Hide Alpine.js elements until initialized */
[x-cloak] {
    display: none !important;
}

/* ============================================
   Z-INDEX LAYERING SYSTEM
   ============================================ */

/* Main content - lowest layer */
.main-content,
main {
    position: relative;
    z-index: 1 !important;
}

/* Header - above content, below menu */
header {
    position: sticky;
    z-index: 40 !important;
}

/* Mobile menu overlay - dims content */
.mobile-menu-overlay {
    position: fixed !important;
    z-index: 9998 !important;
    inset: 0 !important;
}

/* Mobile menu panel - highest layer */
.mobile-menu-panel {
    position: fixed !important;
    z-index: 9999 !important;
    top: 0 !important; 
    right: 0 !important;
    bottom: 0 !important;
    height: 100vh !important;
}

/* ============================================
   MENU INTERACTION STATES
   ============================================ */

/* Prevent body scroll when menu is open */
body.menu-open {
    overflow: hidden !important;
    height: 100vh !important;
}

/* Disable pointer events on main content when menu is open */
body.menu-open main {
    pointer-events: none !important;
}

/* ============================================
   MOBILE VIEW (< 768px)
   ============================================ */
@media (max-width: 767px) {
    /* Header Optimizations */
    header {
        height: auto !important;
    }
    
    header .h-16 {
        height: 3.5rem !important; /* 56px */
    }
    
    /* Logo sizing */
    header img {
        height: 2rem !important; /* 32px */
    }
    
    /* Navigation - Hide desktop nav, show mobile menu button */
    header nav.hidden {
        display: none !important;
    }
    
    /* User dropdown adjustments */
    header .relative > button {
        padding: 0.5rem !important;
    }
    
    /* Search bar - stack vertically on very small screens */
    @media (max-width: 480px) {
        header .flex.gap-4 {
            flex-direction: column;
            gap: 0.5rem;
        }
    }
    
    /* Hero Section */
    .hero-section {
        padding-top: 2rem !important;
        padding-bottom: 2rem !important;
    }
    
    /* Cards - Single column */
    .grid-cols-2,
    .grid-cols-3,
    .grid-cols-4 {
        grid-template-columns: 1fr !important;
    }
    
    /* Service/Package cards */
    .service-card,
    .package-card {
        padding: 1rem !important;
    }
    
    /* Typography */
    .text-4xl {
        font-size: 1.875rem !important; /* 30px */
    }
    
    .text-3xl {
        font-size: 1.5rem !important; /* 24px */
    }
    
    .text-2xl {
        font-size: 1.25rem !important; /* 20px */
    }
    
    /* Spacing */
    .py-16 {
        padding-top: 2rem !important;
        padding-bottom: 2rem !important;
    }
    
    .py-12 {
        padding-top: 1.5rem !important;
        padding-bottom: 1.5rem !important;
    }
    
    /* Buttons - Full width on mobile */
    .btn-group {
        flex-direction: column;
    }
    
    .btn-group button,
    .btn-group a {
        width: 100%;
    }
    
    /* Tables - Use mobile card view */
    .desktop-table-view {
        display: none !important;
    }
    
    .mobile-table-view {
        display: block !important;
    }
    
    /* Forms */
    .form-grid-2,
    .form-grid-3 {
        grid-template-columns: 1fr !important;
    }
    
    /* Modal - Full screen on mobile */
    .modal-content {
        width: 100% !important;
        height: 100vh !important;
        max-width: 100% !important;
        border-radius: 0 !important;
    }
    
    /* Footer - Stack columns */
    footer .grid {
        grid-template-columns: 1fr !important;
    }
    
    /* Announcements */
    .announcement-card {
        padding: 1rem !important;
    }
    
    /* Sidebar - Hide on mobile, use toggle */
    aside.sidebar {
        position: fixed;
        left: -100%;
        transition: left 0.3s ease;
        z-index: 50;
    }
    
    aside.sidebar.open {
        left: 0;
    }
}

/* ============================================
   PROFESSIONAL SLIDER - ALL SCREEN SIZES
   ============================================ */

/* Slider Container - Adaptive Heights */
.slider-container {
    width: 100%;
    position: relative;
    transition: height 0.3s ease;
}

/* Line Clamp Utilities */
.line-clamp-2 {
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

.line-clamp-3 {
    display: -webkit-box !important;
    -webkit-line-clamp: 3 !important;
    line-clamp: 3 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

/* Mobile Optimizations (< 640px) */
@media (max-width: 639px) {
    .slider-container {
        min-height: 280px !important;
        height: 280px !important;
    }
}

/* Small Tablets (640px - 767px) */
@media (min-width: 640px) and (max-width: 767px) {
    .slider-container {
        min-height: 320px !important;
        height: 320px !important;
    }
}

/* Tablets (768px - 1023px) */
@media (min-width: 768px) and (max-width: 1023px) {
    .slider-container {
        min-height: 400px !important;
        height: 400px !important;
    }
}

/* Desktop (1024px - 1279px) */
@media (min-width: 1024px) and (max-width: 1279px) {
    .slider-container {
        min-height: 480px !important;
        height: 480px !important;
    }
}

/* Large Desktop (>= 1280px) */
@media (min-width: 1280px) {
    .slider-container {
        min-height: 520px !important;
        height: 520px !important;
    }
}

/* ============================================
   TABLET MINI VIEW (768px - 820px)
   ============================================ */
@media (min-width: 768px) and (max-width: 820px) {
    /* Header - Tighter spacing for smaller tablets */
    header .max-w-7xl {
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }
    
    header nav.space-x-8 {
        gap: 0.5rem !important; /* Even tighter spacing */
    }
    
    header nav a {
        font-size: 0.8125rem !important; /* 13px */
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
    }
    
    /* Logo text - smaller */
    header .text-xl {
        font-size: 1rem !important; /* 16px */
    }
    
    /* Auth buttons - more compact */
    header .space-x-4 {
        gap: 0.5rem !important;
    }
    
    header a[href*="login"],
    header a[href*="register"] {
        font-size: 0.8125rem !important; /* 13px */
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
        padding-top: 0.5rem !important;
        padding-bottom: 0.5rem !important;
    }
}

/* ============================================
   TABLET VIEW (768px - 1023px)
   ============================================ */
@media (min-width: 768px) and (max-width: 1023px) {
    /* Mobile Menu Panel for Tablet */
    .mobile-menu-panel {
        width: 320px !important; /* Wider for tablets */
    }
    .mobile-menu-panel .text-sm { /* Navigation items text */
        font-size: 1rem !important; /* 16px */
    }
    .mobile-menu-panel .text-xs { /* Auth section smaller text */
        font-size: 0.875rem !important; /* 14px */
    }
    .mobile-menu-panel .text-\[11px\] { /* User info name */
        font-size: 0.9375rem !important; /* 15px */
    }
    .mobile-menu-panel .text-\[10px\] { /* User info email */
        font-size: 0.8125rem !important; /* 13px */
    }
    .mobile-menu-panel .bx { /* Icons */
        font-size: 1.375rem !important; /* 22px */
    }
    .mobile-menu-panel .min-h-\[40px\] { /* Nav items, dashboard, logout */
        min-height: 52px !important;
    }
    .mobile-menu-panel .min-h-\[36px\] { /* Login/Register buttons */
        min-height: 48px !important;
    }
    .mobile-menu-panel .px-3 { /* Horizontal padding for items */
        padding-left: 1.25rem !important; /* 20px */
        padding-right: 1.25rem !important; /* 20px */
    }
    .mobile-menu-panel .py-2 { /* Vertical padding for items */
        padding-top: 0.625rem !important; /* 10px */
        padding-bottom: 0.625rem !important; /* 10px */
    }
    .mobile-menu-panel .gap-3 { /* Gap for nav items */
        gap: 1.25rem !important; /* 20px */
    }
    .mobile-menu-panel .px-2 { /* Auth button wrapper padding */
        padding-left: 1.25rem !important; /* 20px */
        padding-right: 1.25rem !important; /* 20px */
    }
    .mobile-menu-panel .py-1\.5 { /* Auth button vertical padding */
        padding-top: 0.75rem !important; /* 12px */
        padding-bottom: 0.75rem !important; /* 12px */
    }
    .mobile-menu-panel .gap-1\.5 { /* Auth button gap */
        gap: 1rem !important; /* 16px */
    }
    .mobile-menu-panel .space-y-1\.5 { /* Auth section vertical spacing */
        --tw-space-y-reverse: 0;
        margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse))) !important; /* 16px */
        margin-bottom: calc(1rem * var(--tw-space-y-reverse)) !important; /* 16px */
    }
    .mobile-menu-panel .px-3.py-2 { /* Header padding */
        padding: 0.875rem 1.25rem !important; /* 14px 20px */
    }
    .mobile-menu-panel .text-lg { /* Header title */
        font-size: 1.125rem !important; /* 18px */
    }
    .mobile-menu-panel .bx-x { /* Close icon */
        font-size: 1.375rem !important; /* 22px */
    }
    
    /* Header & Navigation - Modern Design */
    header {
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    }
    
    header .h-16 {
        height: 4.5rem; /* 72px - taller header for better presence */
    }
    
    /* Logo section - enhanced */
    header .flex.items-center a {
        transition: transform 0.2s ease;
    }
    
    header .flex.items-center a:hover {
        transform: scale(1.02);
    }
    
    /* Logo text sizing */
    header .text-xl {
        font-size: 1.125rem; /* 18px */
        font-weight: 700;
        letter-spacing: -0.025em;
    }
    
    /* Auth buttons - modern styling */
    header a[href*="login"] {
        font-weight: 500;
        padding: 0.625rem 1rem;
        border-radius: 0.5rem;
        transition: all 0.2s ease;
    }
    
    header a[href*="login"]:hover {
        background-color: rgba(107, 114, 128, 0.1);
    }
    
    header a[href*="register"] {
        font-weight: 600;
        padding: 0.625rem 1.25rem;
        border-radius: 0.5rem;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
    }
    
    header a[href*="register"]:hover {
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        transform: translateY(-1px);
    }
    
    /* Layout Adjustments */
    
    /* Two Column Layouts for better tablet experience */
    .grid-cols-3,
    .grid-cols-4 {
        grid-template-columns: repeat(2, 1fr) !important;
    }
    
    /* Sidebar width adjustment */
    aside.sidebar {
        width: 200px;
    }
    
    /* Table - Allow horizontal scroll */
    table {
        display: table;
        width: 100%;
    }
    
    /* Forms - Two columns */
    .form-grid-2 {
        grid-template-columns: repeat(2, 1fr);
    }
    
    /* Cards - Two columns */
    .card-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    /* Typography adjustments */
    .text-3xl {
        font-size: 1.75rem; /* 28px instead of 30px */
    }
    
    .text-4xl {
        font-size: 2rem; /* 32px instead of 36px */
    }
    
    /* Spacing adjustments */
    .py-12 {
        padding-top: 2.5rem !important;
        padding-bottom: 2.5rem !important;
    }
    
    .py-16 {
        padding-top: 3rem !important;
        padding-bottom: 3rem !important;
    }
    
    /* Container padding */
    .max-w-7xl {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
    }
    
    /* Buttons & Interactive Elements */
    
    /* Filter tabs - ensure proper touch targets */
    .filter-tab {
        min-height: 44px !important;
        padding: 0.625rem 1.25rem !important;
        font-size: 0.9375rem; /* 15px */
    }
    
    /* Button groups - keep horizontal on tablet */
    .btn-group {
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    
    .btn-group button,
    .btn-group a {
        min-height: 44px;
        padding: 0.625rem 1rem;
    }
    
    /* Cards & Content */
    
    /* Service/Package cards */
    .service-card,
    .package-card {
        padding: 1.25rem; /* Slightly reduce from desktop */
    }
    
    /* Card buttons */
    .service-card a,
    .package-card a {
        min-height: 44px;
        padding: 0.625rem 1rem;
        font-size: 0.875rem;
    }
    
    /* Hero section adjustments */
    .hero-cta-button {
        min-height: 48px;
        padding: 0.75rem 1.5rem;
        font-size: 0.9375rem;
    }
}

/* ============================================
   DESKTOP VIEW (>= 1024px)
   ============================================ */
@media (min-width: 1024px) {
    /* Hide mobile-only elements */
    .mobile-only {
        display: none !important;
    }
    
    /* Show desktop table view */
    .desktop-table-view {
        display: block !important;
    }
    
    .mobile-table-view {
        display: none !important;
    }
    
    /* Sidebar always visible */
    aside.sidebar {
        position: static;
        left: auto;
    }
}

/* ============================================
   LARGE DESKTOP VIEW (>= 1280px)
   ============================================ */
@media (min-width: 1280px) {
    /* Wider sidebar */
    aside.sidebar {
        width: 280px;
    }
    
    /* More columns for grids */
    .grid-responsive {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* ============================================
   PRINT STYLES
   ============================================ */
@media print {
    /* Hide navigation and interactive elements */
    header,
    footer,
    .sidebar,
    .mobile-menu,
    button,
    .no-print {
        display: none !important;
    }
    
    /* Expand content */
    main {
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Ensure good contrast */
    body {
        background: white !important;
        color: black !important;
    }
    
    /* Page breaks */
    .page-break {
        page-break-after: always;
    }
    
    /* Avoid breaking inside elements */
    .card,
    .table-row {
        page-break-inside: avoid;
    }
}

/* ============================================
   ACCESSIBILITY ENHANCEMENTS
   ============================================ */

/* High contrast mode support */
@media (prefers-contrast: high) {
    button,
    a,
    input,
    select,
    textarea {
        border: 2px solid currentColor !important;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* Dark mode support (if implemented) */
@media (prefers-color-scheme: dark) {
    /* Add dark mode styles here if needed */
}

/* ============================================
   TOUCH DEVICE OPTIMIZATIONS
   ============================================ */
@media (hover: none) and (pointer: coarse) {
    /* Increase touch targets */
    button,
    a,
    input[type="button"],
    input[type="submit"],
    .clickable {
        min-height: 44px !important;
        min-width: 44px !important;
    }
    
    /* Remove hover effects on touch devices */
    /* Hover styles are less useful on touch - handled by individual components */
    
    /* Improve tap highlighting */
    * {
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    }
}

/* ============================================
   LANDSCAPE ORIENTATION (Mobile)
   ============================================ */
@media (max-width: 767px) and (orientation: landscape) {
    /* Reduce vertical padding */
    .py-16 {
        padding-top: 1rem !important;
        padding-bottom: 1rem !important;
    }
    
    .py-12 {
        padding-top: 0.75rem !important;
        padding-bottom: 0.75rem !important;
    }
    
    /* Adjust header height */
    header .h-16 {
        height: 3rem !important; /* 48px */
    }
    
    /* Make modals scrollable */
    .modal-content {
        max-height: 90vh;
        overflow-y: auto;
    }
}

/* ============================================
   SAFE AREA INSETS (for notched devices)
   ============================================ */
@supports (padding: max(0px)) {
    header,
    footer,
    .safe-area {
        padding-left: max(1rem, env(safe-area-inset-left));
        padding-right: max(1rem, env(safe-area-inset-right));
    }
    
    header {
        padding-top: max(0, env(safe-area-inset-top));
    }
    
    footer {
        padding-bottom: max(0, env(safe-area-inset-bottom));
    }
    
    @media (max-width: 767px) {
        .safe-left {
            padding-left: max(1rem, env(safe-area-inset-left));
        }
        
        .safe-right {
            padding-right: max(1rem, env(safe-area-inset-right));
        }
    }
}
